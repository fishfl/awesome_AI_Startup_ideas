{
    "id": "/WECENG/ticket-purchase",
    "issues": "39",
    "watch": "9",
    "fork": "375",
    "star": "2.6k",
    "topics": [],
    "license": "",
    "languages": [
        "Python,100.0%"
    ],
    "contributors": [],
    "about": "å¤§éº¦è‡ªåŠ¨æŠ¢ç¥¨ï¼Œæ”¯æŒäººå‘˜ã€åŸå¸‚ã€æ—¥æœŸåœºæ¬¡ã€ä»·æ ¼é€‰æ‹©",
    "is_AI": "n",
    "category": "Web Crawlers",
    "summary": "```markdown\n# Dawang Automatic Ticket Grabbing Script Project Analysis\n\n## 1. Core Content and Problems Solved\n\nThis project is an automated ticket-purchasing tool based on **Selenium** and **Appium**, designed to enable users to efficiently and instantly secure concert or event tickets on Dawang.cn (Damai.cn) or the Dawang mobile app.\n\n### Key Problems Addressed:\n- **Slow manual purchasing with low success rate**: Tickets for popular events often sell out within seconds of release, making it nearly impossible for regular users to complete login, seat selection, and order submission manually in time.\n- **Difficulty filtering complex purchase conditions**: Users must simultaneously select multiple parameters (e.g., city, date/session, price tier, attendees), which is error-prone and tedious when done manually.\n- **Need for cross-platform support**: Web and mobile platforms have different purchasing rules; this project offers dual solutionsâ€”web automation via Selenium and mobile automation via Appium.\n\nBy simulating real user behavior through automated scripts, the tool enables one-click execution from login to checkout, significantly improving efficiency and ticket acquisition success rates.\n\n---\n\n## 2. Breakthroughs and Innovations\n\n### Key Innovations:\n- âœ… **Highly Configurable**: Flexible settings via `config.json` file for target event URL, attendees, city, date, price tiers, etc., meeting personalized ticketing needs.\n- âœ… **Supports Multi-Condition Filtering**: Allows simultaneous specification of multiple dates and price levels; the system automatically selects the first matching option, increasing chances of securing ideal seats.\n- âœ… **Dual Platform Support (Web + App)**: Offers both PC browser automation (Selenium) and mobile app automation (Appium), adapting to anti-bot mechanisms across platforms.\n- âœ… **Near \"Zero-Latency\" Ticket Grabbing Experience**: Pre-loads pages, maintains logged-in status, and rapidly clicks/submits ordersâ€”minimizing human delays and gaining a competitive edge in millisecond-level races.\n- âœ… **Modular Design for Easy Extension**: Separation of configuration files and code logic makes maintenance and customization easier, ideal for advanced users seeking feature extensions.\n\n> âš ï¸ Note: While technically effective, such automation may violate Damai's Terms of Service and could result in account suspension.\n\n---\n\n## 3. Viable Startup Ideas Based on This Technology\n\nLeveraging the underlying principles of this project, several legally compliant and commercially viable startup directions can be developed:\n\n### ğŸš€ Idea 1: ã€Smart Event Ticketing Assistantã€‘SaaS Platform\n- **Target Audience**: General consumers seeking lightweight ticketing assistance (non-fully automated)\n- **Features**:\n  - Countdown reminders + one-click redirect to purchase page\n  - Auto-fill attendee information (using legally cached cookies)\n  - Real-time ticket availability monitoring with push notifications (WeChat/SMS)\n- **Revenue Model**: Subscription-based (Â¥9.9/month), affiliate marketing commissions\n- **Compliance Assurance**: Does not bypass CAPTCHA or simulate clicksâ€”only provides alerts and quick access\n\n### ğŸ¯ Idea 2: ã€Fan Club Exclusive Ticket Proxy Serviceã€‘\n- **Target Customers**: Artist fan clubs, supporter groups\n- **Services**:\n  - Batch ticket purchasing on behalf of groups (legally authorized orders)\n  - Ticket strategy consulting (predicting release times, identifying high-stock tiers)\n  - Data-driven analysis to forecast optimal ticket-grabbing windows\n- **Advantages**: More professional and efficient than individual efforts, building brand trust\n- **Extended Value**: Can expand into merchandise group buys, fan event planning\n\n### ğŸ’¡ Idea 3: ã€AI-Powered Event Intelligence Subscription Platformã€‘\n- **Core Value**: Early access to unannounced event schedules\n- **Technical Implementation**:\n  - Scrape venue websites, artist tour calendars, and cultural bureau approvals\n  - Use NLP to analyze social media trends and predict tour cities\n  - Push â€œUpcoming Sale Alertsâ€ to subscribers\n- **Business Model**:\n  - Premium intelligence packages (Â¥50/quarter)\n  - Referral commission partnerships with ticketing platforms\n- **Differentiation**: Not about grabbing ticketsâ€”but helping users know *when* to grab them\n\n### ğŸ” Idea 4: ã€Secure Ticket-Grabbing Boxã€‘Integrated Hardware-Software Device\n- **Product Form**: Mini Linux device with pre-installed ticketing system\n- **Key Selling Points**:\n  - Plug-and-play: connect to a display and start automatic ticketing\n  - Built-in anti-ban features (randomized delays, IP rotation API support)\n  - Remote control via smartphone\n- **Target Users**: Non-technical individuals with strong demand (e.g., parents buying Jay Chou concert tickets for their kids)\n- **Pricing Strategy**: Hardware + annual service model (Â¥499 device + Â¥99/year updates & maintenance)\n\n---\n\n## Summary\n\n| Dimension | Content |\n|---------|--------|\n| **Core Value** | Solves slow, error-prone, and low-success-rate manual ticket purchasing |\n| **Technical Highlights** | Dual-engine (Selenium/Appium), intelligent multi-condition matching, high configurability |\n| **Commercial Potential** | Can evolve into information services, agency operations, or hardware products |\n| **Risk Warning** | Fully automated bots may violate platform policiesâ€”recommend shifting toward \"assisted\" tools |\n\nğŸ“Œ **Recommended Direction**: Avoid direct confrontation with platform anti-bot systems using \"fully automated scripts.\" Instead, pivot toward **information arbitrage, user experience enhancement, and community-driven operations**â€”developing sustainable, compliant products within the cultural entertainment ecosystem.\n```",
    "text": "å¤§éº¦æŠ¢ç¥¨è„šæœ¬ V1.0\nç‰¹å¾\nè‡ªåŠ¨æ— å»¶æ—¶æŠ¢ç¥¨\næ”¯æŒäººå‘˜ã€åŸå¸‚ã€æ—¥æœŸåœºæ¬¡ã€ä»·æ ¼é€‰æ‹©\nåŠŸèƒ½ä»‹ç»\né€šè¿‡seleniumæ‰“å¼€é¡µé¢è¿›è¡Œç™»å½•ï¼Œæ¨¡æ‹Ÿç”¨æˆ·è´­ç¥¨æµç¨‹è‡ªåŠ¨è´­ç¥¨\nå…¶æµç¨‹å›¾å¦‚ä¸‹:\nå‡†å¤‡å·¥ä½œ\n1. é…ç½®ç¯å¢ƒ\n1.1å®‰è£…python3ç¯å¢ƒ\nWindows\nè®¿é—®Pythonå®˜æ–¹ç½‘ç«™ï¼š\nhttps://www.python.org/downloads/windows/\nä¸‹è½½æœ€æ–°çš„Python 3.9+ç‰ˆæœ¬çš„å®‰è£…ç¨‹åºã€‚\nè¿è¡Œå®‰è£…ç¨‹åºã€‚\nåœ¨å®‰è£…ç¨‹åºä¸­ï¼Œç¡®ä¿å‹¾é€‰ \"Add Python X.X to PATH\" é€‰é¡¹ï¼Œè¿™å°†è‡ªåŠ¨å°†Pythonæ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œæ–¹ä¾¿åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨Pythonã€‚\nå®Œæˆå®‰è£…åï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦æˆ–PowerShellä¸­è¾“å…¥\npython3\næ¥å¯åŠ¨Pythonè§£é‡Šå™¨ã€‚\nmacOS\nä½ å¯ä»¥ä½¿ç”¨Homebrewæ¥å®‰è£…Python 3ã€‚\nå®‰è£…Homebrewï¼ˆå¦‚æœæœªå®‰è£…ï¼‰ï¼šæ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n/bin/bash -c\n\"\n$(\ncurl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh\n)\n\"\nå®‰è£…Python 3ï¼šè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…Python 3ï¼š\nbrew install python@3\n1.2 å®‰è£…æ‰€éœ€è¦çš„ç¯å¢ƒ\nåœ¨å‘½ä»¤çª—å£è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤\npip3 install selenium\n1.3 ä¸‹è½½google chromeæµè§ˆå™¨\nä¸‹è½½åœ°å€:\nhttps://www.google.cn/intl/zh-CN/chrome/?brand=YTUH&gclid=Cj0KCQjwj5mpBhDJARIsAOVjBdoV_1sBwdqKGHV3rUU1vJmNKZdy5QNzbRT8F5O0-_jq1WHXurE8a7MaAkWrEALw_wcB&gclsrc=aw.ds\n2. ä¿®æ”¹é…ç½®æ–‡ä»¶\nåœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œéœ€è¦å…ˆä¿®æ”¹\nconfig.json\næ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ç”¨äºæŒ‡å®šç”¨æˆ·éœ€è¦æŠ¢ç¥¨çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¼”å”±ä¼šçš„åœºæ¬¡ã€è§‚æ¼”çš„äººå‘˜ã€åŸå¸‚ã€æ—¥æœŸã€ä»·æ ¼ç­‰ã€‚æ–‡ä»¶ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n2.1 æ–‡ä»¶å†…å®¹è¯´æ˜\nindex_url\nä¸ºå¤§éº¦ç½‘çš„åœ°å€ï¼Œ\næ— éœ€ä¿®æ”¹\nlogin_url\nä¸ºå¤§éº¦ç½‘çš„ç™»å½•åœ°å€ï¼Œ\næ— éœ€ä¿®æ”¹\ntarget_url\nä¸ºç”¨æˆ·éœ€è¦æŠ¢çš„æ¼”å”±ä¼šç¥¨çš„ç›®æ ‡åœ°å€ï¼Œ\nå¾…ä¿®æ”¹\nusers\nä¸ºè§‚æ¼”äººçš„å§“åï¼Œ\nè§‚æ¼”äººéœ€è¦ç”¨æˆ·åœ¨æ‰‹æœºå¤§éº¦APPä¸­å…ˆå¡«å†™å¥½ï¼Œç„¶åå†å¡«å…¥è¯¥é…ç½®æ–‡ä»¶ä¸­\nï¼Œ\nå¾…ä¿®æ”¹\ncity\nä¸ºåŸå¸‚ï¼Œ\nå¦‚æœç”¨æˆ·éœ€è¦æŠ¢çš„æ¼”å”±ä¼šç¥¨éœ€è¦é€‰æ‹©åŸå¸‚ï¼Œè¯·æŠŠåŸå¸‚å¡«å…¥æ­¤å¤„ã€‚å¦‚æ— éœ€é€‰æ‹©ï¼Œåˆ™ä¸å¡«\ndate\nä¸ºåœºæ¬¡æ—¥æœŸï¼Œ\nå¾…ä¿®æ”¹ï¼Œå¯å¤šé€‰\nprice\nä¸ºç¥¨æ¡£çš„ä»·æ ¼ï¼Œ\nå¾…ä¿®æ”¹ï¼Œå¯å¤šé€‰\nif_commit_order\nä¸ºæ˜¯å¦è¦è‡ªåŠ¨æäº¤è®¢å•ï¼Œ\næ”¹æˆ true\nif_listenä¸ºæ˜¯å¦å›æµç›‘å¬ï¼Œ\næ”¹æˆtrue\n2.2 ç¤ºä¾‹è¯´æ˜\nè¿›å…¥å¤§éº¦ç½‘\nhttps://www.damai.cn/ï¼Œé€‰æ‹©ä½ éœ€è¦æŠ¢ç¥¨çš„æ¼”å”±ä¼šã€‚å‡è®¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næ¥ä¸‹æ¥æŒ‰ç…§ä¸‹å›¾çš„æ ‡æ³¨å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼š\næœ€ç»ˆ\nconfig.json\nçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n{\n\"index_url\"\n:\n\"\nhttps://www.damai.cn/\n\"\n,\n\"login_url\"\n:\n\"\nhttps://passport.damai.cn/login?ru=https%3A%2F%2Fwww.damai.cn%2F\n\"\n,\n\"target_url\"\n:\n\"\nhttps://detail.damai.cn/item.htm?spm=a2oeg.home.card_0.ditem_1.591b23e1JQGWHg&id=740680932762\n\"\n,\n\"users\"\n: [\n\"\nåå­—1\n\"\n,\n\"\nåå­—2\n\"\n],\n\"city\"\n:\n\"\nå¹¿å·\n\"\n,\n\"date\"\n:\n\"\n2023-10-28\n\"\n,\n\"price\"\n:\n\"\n1039\n\"\n,\n\"if_listen\"\n:\ntrue\n,\n\"if_commit_order\"\n:\ntrue\n}\n3.è¿è¡Œç¨‹åº\nè¿è¡Œç¨‹åºå¼€å§‹æŠ¢ç¥¨ï¼Œè¿›å…¥å‘½ä»¤çª—å£ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\ncd\ndamai\npython3 damai.py\nå¤§éº¦appæŠ¢ç¥¨\nå¤§éº¦appæŠ¢ç¥¨è„šæœ¬éœ€è¦ä¾èµ–appiumï¼Œå› æ­¤éœ€è¦ç°åœ¨å®‰è£…appium server&clientç¯å¢ƒï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\nappium server\nä¸‹è½½\nå…ˆå®‰è£…å¥½nodeç¯å¢ƒï¼ˆå…·å¤‡npmï¼‰nodeç‰ˆæœ¬å·18.0.0\nå…ˆä¸‹è½½å¹¶å®‰è£…å¥½android sdkï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆappium serverè¿è¡Œéœ€ä¾èµ–android sdk)\nä¸‹è½½appium\nnpm install -g appium\næŸ¥çœ‹appiumæ˜¯å¦å®‰è£…æˆåŠŸ\nappium -v\nä¸‹è½½UiAutomator2é©±åŠ¨\nnpm install appium-uiautomator2-driver\nâ€‹\t\tå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é”™è¯¯ï¼š\nâœ  xcode git:(master) âœ— npm install appium-uiautomator2-driver\n\nnpm ERR! code 1\nnpm ERR! path /Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver/node_modules/appium-chromedriver\nnpm ERR! command failed\nnpm ERR! command sh -c node install-npm.js\nnpm ERR! [11:57:54] Error installing Chromedriver: Request failed with status code 404\nnpm ERR! [11:57:54] AxiosError: Request failed with status code 404\nnpm ERR!     at settle (/Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver/node_modules/axios/lib/core/settle.js:19:12)\nnpm ERR!     at IncomingMessage.handleStreamEnd (/Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver/node_modules/axios/lib/adapters/http.js:572:11)\nnpm ERR!     at IncomingMessage.emit (node:events:539:35)\nnpm ERR!     at endReadableNT (node:internal/streams/readable:1344:12)\nnpm ERR!     at processTicksAndRejections (node:internal/process/task_queues:82:21)\nnpm ERR! [11:57:54] Downloading Chromedriver can be skipped by setting the'APPIUM_SKIP_CHROMEDRIVER_INSTALL' environment variable.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /Users/chenweicheng/.npm/_logs/2023-10-26T03_57_35_950Z-debug-0.log\nâ€‹\t\tè§£å†³åŠæ³•ï¼ˆæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œé”™è¯¯åŸå› æ˜¯æ²¡æœ‰æ‰¾åˆ°chromeæµè§ˆå™¨é©±åŠ¨ï¼Œå¿½ç•¥å³å¯ï¼‰\nexport\nAPPIUM_SKIP_CHROMEDRIVER_INSTALL=true\nå¯åŠ¨\nå¯åŠ¨appium serverå¹¶ä½¿ç”¨uiautomator2é©±åŠ¨\nappium --use-plugins uiautomator2\nå¯åŠ¨æˆåŠŸå°†å‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼š\n[Appium] Welcome to Appium v2.2.1 (REV 2176894a5be5da17a362bf3f20678641a78f4b69)\n[Appium] Non-default server args:\n[Appium] {\n[Appium]   usePlugins: [\n[Appium]     'uiautomator2'\n[Appium]   ]\n[Appium] }\n[Appium] Attempting to load driver uiautomator2...\n[Appium] Requiring driver at /Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver\n[Appium] Appium REST http interface listener started on http://0.0.0.0:4723\n[Appium] You can provide the following URLs in your client code to connect to this server:\n[Appium] \thttp://127.0.0.1:4723/ (only accessible from the same host)\n[Appium] \thttp://172.31.102.45:4723/\n[Appium] \thttp://198.18.0.1:4723/\n[Appium] Available drivers:\n[Appium]   - uiautomator2@2.32.3 (automationName 'UiAutomator2')\n[Appium] No plugins have been installed. Use the \"appium plugin\" command to install the one(s) you want to use.\nå…¶ä¸­\n[Appium] \thttp://127.0.0.1:4723/ (only accessible from the same host) [Appium] \thttp://172.31.102.45:4723/ [Appium] \thttp://198.18.0.1:4723/\nä¸ºappium serverè¿æ¥åœ°å€\nappium client\nå…ˆä¸‹è½½å¹¶å®‰è£…å¥½python3å’Œpip3\nå®‰è£…\npip3 install appium-python-client\nåœ¨ä»£ç ä¸­å¼•å…¥å¹¶ä½¿ç”¨appium\nfrom\nappium\nimport\nwebdriver\nfrom\nappium\n.\noptions\n.\ncommon\n.\nbase\nimport\nAppiumOptions\ndevice_app_info\n=\nAppiumOptions\n()\ndevice_app_info\n.\nset_capability\n(\n'platformName'\n,\n'Android'\n)\ndevice_app_info\n.\nset_capability\n(\n'platformVersion'\n,\n'10'\n)\ndevice_app_info\n.\nset_capability\n(\n'deviceName'\n,\n'YourDeviceName'\n)\ndevice_app_info\n.\nset_capability\n(\n'appPackage'\n,\n'cn.damai'\n)\ndevice_app_info\n.\nset_capability\n(\n'appActivity'\n,\n'.launcher.splash.SplashMainActivity'\n)\ndevice_app_info\n.\nset_capability\n(\n'unicodeKeyboard'\n,\nTrue\n)\ndevice_app_info\n.\nset_capability\n(\n'resetKeyboard'\n,\nTrue\n)\ndevice_app_info\n.\nset_capability\n(\n'noReset'\n,\nTrue\n)\ndevice_app_info\n.\nset_capability\n(\n'newCommandTimeout'\n,\n6000\n)\ndevice_app_info\n.\nset_capability\n(\n'automationName'\n,\n'UiAutomator2'\n)\n# è¿æ¥appium serverï¼Œserveråœ°å€æŸ¥çœ‹appiumå¯åŠ¨ä¿¡æ¯\ndriver\n=\nwebdriver\n.\nRemote\n(\n'http://127.0.0.1:4723'\n,\noptions\n=\ndevice_app_info\n)\nå¯åŠ¨è„šæœ¬ç¨‹åº\ncd\ndamai_appium\npython3 damai_appium.py",
    "readme": "# å¤§éº¦æŠ¢ç¥¨è„šæœ¬ V1.0\n### ç‰¹å¾\n\n- è‡ªåŠ¨æ— å»¶æ—¶æŠ¢ç¥¨\n- æ”¯æŒäººå‘˜ã€åŸå¸‚ã€æ—¥æœŸåœºæ¬¡ã€ä»·æ ¼é€‰æ‹©\n\n## åŠŸèƒ½ä»‹ç»\né€šè¿‡seleniumæ‰“å¼€é¡µé¢è¿›è¡Œç™»å½•ï¼Œæ¨¡æ‹Ÿç”¨æˆ·è´­ç¥¨æµç¨‹è‡ªåŠ¨è´­ç¥¨\n\nå…¶æµç¨‹å›¾å¦‚ä¸‹:\n\n<img src=\"https://raw.githubusercontent.com/WECENG/ticket-purchase/main/img/å¤§éº¦æŠ¢ç¥¨æµç¨‹.png\" width=\"50%\" height=\"50%\" />\n\n## å‡†å¤‡å·¥ä½œ\n### 1. é…ç½®ç¯å¢ƒ\n\n#### 1.1å®‰è£…python3ç¯å¢ƒ\n\n**Windows**\n\n1. è®¿é—®Pythonå®˜æ–¹ç½‘ç«™ï¼šhttps://www.python.org/downloads/windows/\n2. ä¸‹è½½æœ€æ–°çš„Python 3.9+ç‰ˆæœ¬çš„å®‰è£…ç¨‹åºã€‚\n3. è¿è¡Œå®‰è£…ç¨‹åºã€‚\n4. åœ¨å®‰è£…ç¨‹åºä¸­ï¼Œç¡®ä¿å‹¾é€‰ \"Add Python X.X to PATH\" é€‰é¡¹ï¼Œè¿™å°†è‡ªåŠ¨å°†Pythonæ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œæ–¹ä¾¿åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨Pythonã€‚\n5. å®Œæˆå®‰è£…åï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦æˆ–PowerShellä¸­è¾“å…¥ `python3` æ¥å¯åŠ¨Pythonè§£é‡Šå™¨ã€‚\n\n**macOS**\n\n1. ä½ å¯ä»¥ä½¿ç”¨Homebrewæ¥å®‰è£…Python 3ã€‚\n\n   - å®‰è£…Homebrewï¼ˆå¦‚æœæœªå®‰è£…ï¼‰ï¼šæ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n     ```shell\n     /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n     ```\n\n   - å®‰è£…Python 3ï¼šè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…Python 3ï¼š\n\n     ```shell\n     brew install python@3\n     ```\n\n#### 1.2 å®‰è£…æ‰€éœ€è¦çš„ç¯å¢ƒ\n\nåœ¨å‘½ä»¤çª—å£è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤\n\n```shell\npip3 install selenium\n```\n\n#### 1.3 ä¸‹è½½google chromeæµè§ˆå™¨\n\nä¸‹è½½åœ°å€: https://www.google.cn/intl/zh-CN/chrome/?brand=YTUH&gclid=Cj0KCQjwj5mpBhDJARIsAOVjBdoV_1sBwdqKGHV3rUU1vJmNKZdy5QNzbRT8F5O0-_jq1WHXurE8a7MaAkWrEALw_wcB&gclsrc=aw.ds\n\n### 2. ä¿®æ”¹é…ç½®æ–‡ä»¶\n\nåœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œéœ€è¦å…ˆä¿®æ”¹`config.json`æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ç”¨äºæŒ‡å®šç”¨æˆ·éœ€è¦æŠ¢ç¥¨çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¼”å”±ä¼šçš„åœºæ¬¡ã€è§‚æ¼”çš„äººå‘˜ã€åŸå¸‚ã€æ—¥æœŸã€ä»·æ ¼ç­‰ã€‚æ–‡ä»¶ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n<img src=\"https://raw.githubusercontent.com/WECENG/ticket-purchase/main/img/config_json.png\" width=\"50%\" height=\"50%\" />\n\n#### 2.1 æ–‡ä»¶å†…å®¹è¯´æ˜\n\n- `index_url`ä¸ºå¤§éº¦ç½‘çš„åœ°å€ï¼Œ**æ— éœ€ä¿®æ”¹**\n- `login_url`ä¸ºå¤§éº¦ç½‘çš„ç™»å½•åœ°å€ï¼Œ**æ— éœ€ä¿®æ”¹**\n- `target_url`ä¸ºç”¨æˆ·éœ€è¦æŠ¢çš„æ¼”å”±ä¼šç¥¨çš„ç›®æ ‡åœ°å€ï¼Œ**å¾…ä¿®æ”¹**\n- `users`ä¸ºè§‚æ¼”äººçš„å§“åï¼Œ**è§‚æ¼”äººéœ€è¦ç”¨æˆ·åœ¨æ‰‹æœºå¤§éº¦APPä¸­å…ˆå¡«å†™å¥½ï¼Œç„¶åå†å¡«å…¥è¯¥é…ç½®æ–‡ä»¶ä¸­**ï¼Œ**å¾…ä¿®æ”¹**\n- `city`ä¸ºåŸå¸‚ï¼Œ**å¦‚æœç”¨æˆ·éœ€è¦æŠ¢çš„æ¼”å”±ä¼šç¥¨éœ€è¦é€‰æ‹©åŸå¸‚ï¼Œè¯·æŠŠåŸå¸‚å¡«å…¥æ­¤å¤„ã€‚å¦‚æ— éœ€é€‰æ‹©ï¼Œåˆ™ä¸å¡«**\n- `date`ä¸ºåœºæ¬¡æ—¥æœŸï¼Œ**å¾…ä¿®æ”¹ï¼Œå¯å¤šé€‰**\n- `price`ä¸ºç¥¨æ¡£çš„ä»·æ ¼ï¼Œ**å¾…ä¿®æ”¹ï¼Œå¯å¤šé€‰**\n- `if_commit_order`ä¸ºæ˜¯å¦è¦è‡ªåŠ¨æäº¤è®¢å•ï¼Œ**æ”¹æˆ true**\n- if_listenä¸ºæ˜¯å¦å›æµç›‘å¬ï¼Œ**æ”¹æˆtrue**\n\n\n\n#### 2.2 ç¤ºä¾‹è¯´æ˜\n\nè¿›å…¥å¤§éº¦ç½‘https://www.damai.cn/ï¼Œé€‰æ‹©ä½ éœ€è¦æŠ¢ç¥¨çš„æ¼”å”±ä¼šã€‚å‡è®¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n<img src=\"https://raw.githubusercontent.com/WECENG/ticket-purchase/main/img/example.png\" width=\"50%\" height=\"50%\" />\n\næ¥ä¸‹æ¥æŒ‰ç…§ä¸‹å›¾çš„æ ‡æ³¨å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼š\n\n<img src=\"https://raw.githubusercontent.com/WECENG/ticket-purchase/main/img/example_detail.png\" width=\"50%\" height=\"50%\" />\n\næœ€ç»ˆ`config.json`çš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n\n```json\n{\n  \"index_url\": \"https://www.damai.cn/\",\n  \"login_url\": \"https://passport.damai.cn/login?ru=https%3A%2F%2Fwww.damai.cn%2F\",\n  \"target_url\": \"https://detail.damai.cn/item.htm?spm=a2oeg.home.card_0.ditem_1.591b23e1JQGWHg&id=740680932762\",\n  \"users\": [\n    \"åå­—1\",\n    \"åå­—2\"\n  ],\n  \"city\": \"å¹¿å·\",\n  \"date\": \"2023-10-28\",\n  \"price\": \"1039\",\n  \"if_listen\":true,\n  \"if_commit_order\": true\n}\n```\n\n\n\n### 3.è¿è¡Œç¨‹åº\n\nè¿è¡Œç¨‹åºå¼€å§‹æŠ¢ç¥¨ï¼Œè¿›å…¥å‘½ä»¤çª—å£ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n\n```shell\ncd damai\npython3 damai.py\n```\n\n\n\n# å¤§éº¦appæŠ¢ç¥¨\n\nå¤§éº¦appæŠ¢ç¥¨è„šæœ¬éœ€è¦ä¾èµ–appiumï¼Œå› æ­¤éœ€è¦ç°åœ¨å®‰è£…appium server&clientç¯å¢ƒï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n\n## appium server\n\n### ä¸‹è½½\n\n- å…ˆå®‰è£…å¥½nodeç¯å¢ƒï¼ˆå…·å¤‡npmï¼‰nodeç‰ˆæœ¬å·18.0.0\n\n- å…ˆä¸‹è½½å¹¶å®‰è£…å¥½android sdkï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼ˆappium serverè¿è¡Œéœ€ä¾èµ–android sdk)\n\n- ä¸‹è½½appium\n\n  ```shell\n  npm install -g appium\n  ```\n\n- æŸ¥çœ‹appiumæ˜¯å¦å®‰è£…æˆåŠŸ\n\n  ```shell\n  appium -v\n  ```\n\n- ä¸‹è½½UiAutomator2é©±åŠ¨\n\n  ```shell\n  npm install appium-uiautomator2-driver\n  ```\n\nâ€‹\t\tå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é”™è¯¯ï¼š\n\n```tex\nâœ  xcode git:(master) âœ— npm install appium-uiautomator2-driver\n\nnpm ERR! code 1\nnpm ERR! path /Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver/node_modules/appium-chromedriver\nnpm ERR! command failed\nnpm ERR! command sh -c node install-npm.js\nnpm ERR! [11:57:54] Error installing Chromedriver: Request failed with status code 404\nnpm ERR! [11:57:54] AxiosError: Request failed with status code 404\nnpm ERR!     at settle (/Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver/node_modules/axios/lib/core/settle.js:19:12)\nnpm ERR!     at IncomingMessage.handleStreamEnd (/Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver/node_modules/axios/lib/adapters/http.js:572:11)\nnpm ERR!     at IncomingMessage.emit (node:events:539:35)\nnpm ERR!     at endReadableNT (node:internal/streams/readable:1344:12)\nnpm ERR!     at processTicksAndRejections (node:internal/process/task_queues:82:21)\nnpm ERR! [11:57:54] Downloading Chromedriver can be skipped by setting the'APPIUM_SKIP_CHROMEDRIVER_INSTALL' environment variable.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /Users/chenweicheng/.npm/_logs/2023-10-26T03_57_35_950Z-debug-0.log\n```\n\nâ€‹\t\tè§£å†³åŠæ³•ï¼ˆæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œé”™è¯¯åŸå› æ˜¯æ²¡æœ‰æ‰¾åˆ°chromeæµè§ˆå™¨é©±åŠ¨ï¼Œå¿½ç•¥å³å¯ï¼‰\n\n```shell\nexport APPIUM_SKIP_CHROMEDRIVER_INSTALL=true\n```\n\n### å¯åŠ¨\n\nå¯åŠ¨appium serverå¹¶ä½¿ç”¨uiautomator2é©±åŠ¨\n\n```shell\nappium --use-plugins uiautomator2\n```\n\nå¯åŠ¨æˆåŠŸå°†å‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼š\n\n```\n[Appium] Welcome to Appium v2.2.1 (REV 2176894a5be5da17a362bf3f20678641a78f4b69)\n[Appium] Non-default server args:\n[Appium] {\n[Appium]   usePlugins: [\n[Appium]     'uiautomator2'\n[Appium]   ]\n[Appium] }\n[Appium] Attempting to load driver uiautomator2...\n[Appium] Requiring driver at /Users/chenweicheng/Documents/xcode/node_modules/appium-uiautomator2-driver\n[Appium] Appium REST http interface listener started on http://0.0.0.0:4723\n[Appium] You can provide the following URLs in your client code to connect to this server:\n[Appium] \thttp://127.0.0.1:4723/ (only accessible from the same host)\n[Appium] \thttp://172.31.102.45:4723/\n[Appium] \thttp://198.18.0.1:4723/\n[Appium] Available drivers:\n[Appium]   - uiautomator2@2.32.3 (automationName 'UiAutomator2')\n[Appium] No plugins have been installed. Use the \"appium plugin\" command to install the one(s) you want to use.\n```\n\nå…¶ä¸­`[Appium] \thttp://127.0.0.1:4723/ (only accessible from the same host)\n[Appium] \thttp://172.31.102.45:4723/\n[Appium] \thttp://198.18.0.1:4723/`ä¸ºappium serverè¿æ¥åœ°å€\n\n\n\n## appium client\n\n- å…ˆä¸‹è½½å¹¶å®‰è£…å¥½python3å’Œpip3\n\n- å®‰è£…\n\n  ```shell\n  pip3 install appium-python-client\n  ```\n\n- åœ¨ä»£ç ä¸­å¼•å…¥å¹¶ä½¿ç”¨appium\n\n  ```python\n  from appium import webdriver\n  from appium.options.common.base import AppiumOptions\n  \n  device_app_info = AppiumOptions()\n  device_app_info.set_capability('platformName', 'Android')\n  device_app_info.set_capability('platformVersion', '10')\n  device_app_info.set_capability('deviceName', 'YourDeviceName')\n  device_app_info.set_capability('appPackage', 'cn.damai')\n  device_app_info.set_capability('appActivity', '.launcher.splash.SplashMainActivity')\n  device_app_info.set_capability('unicodeKeyboard', True)\n  device_app_info.set_capability('resetKeyboard', True)\n  device_app_info.set_capability('noReset', True)\n  device_app_info.set_capability('newCommandTimeout', 6000)\n  device_app_info.set_capability('automationName', 'UiAutomator2')\n  \n  # è¿æ¥appium serverï¼Œserveråœ°å€æŸ¥çœ‹appiumå¯åŠ¨ä¿¡æ¯\n  driver = webdriver.Remote('http://127.0.0.1:4723', options=device_app_info)\n  \n  ```\n\n- å¯åŠ¨è„šæœ¬ç¨‹åº\n\n  ```shell\n  cd damai_appium\n  python3 damai_appium.py\n  ```\n\n  \n\n",
    "author": "WECENG",
    "project": "ticket-purchase",
    "date": "2025-09-22"
}